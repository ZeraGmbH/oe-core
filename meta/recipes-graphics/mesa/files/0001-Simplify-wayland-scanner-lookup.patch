From 7e8e0f8a8ac2425e19a2f340c9e3da9345f25940 Mon Sep 17 00:00:00 2001
From: Jussi Kukkonen <jussi.kukkonen@intel.com>
Date: Tue, 15 Nov 2016 15:20:49 +0200
Subject: [PATCH 1/6] Simplify wayland-scanner lookup
Organization: O.S. Systems Software LTDA.

Don't use pkg-config to lookup the path of a binary that's in the path.

Alternatively we'd have to prefix the path returned by pkg-config with
PKG_CONFIG_SYSROOT_DIR.

Upstream-Status: Pending
Signed-off-by: Jussi Kukkonen <jussi.kukkonen@intel.com>
Signed-off-by: Otavio Salvador <otavio@ossystems.com.br>
Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 configure.ac | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/configure.ac b/configure.ac
index f8bb131cb6..8ee37135fe 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1825,9 +1825,7 @@ for plat in $platforms; do
         fi
         WAYLAND_PROTOCOLS_DATADIR=`$PKG_CONFIG --variable=pkgdatadir wayland-protocols`
 
-        PKG_CHECK_MODULES([WAYLAND_SCANNER], [wayland-scanner],
-                          WAYLAND_SCANNER=`$PKG_CONFIG --variable=wayland_scanner wayland-scanner`,
-                          WAYLAND_SCANNER='')
+        AC_PATH_PROG([WAYLAND_SCANNER], [wayland-scanner], [:])
         PKG_CHECK_EXISTS([wayland-scanner >= 1.15],
                           AC_SUBST(SCANNER_ARG, 'private-code'),
                           AC_SUBST(SCANNER_ARG, 'code'))
-- 
2.14.4

